(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.data,r=window.React,o=window.wp.apiFetch;var s=e.n(o);const a=window.ReactJSXRuntime,__=wp.i18n.__;wp.blocks.registerBlockType("ourplugin/featured-professor",{title:__("Professor Callout","featured-professor"),description:__("Include a short description and link to a professor of your choice","featured-professor"),icon:"welcome-learn-more",category:"common",attributes:{profId:{type:"string"}},edit:function(e){const[o,n]=(0,r.useState)("");function i(){const e=wp.data.select("core/block-editor").getBlocks().filter((e=>"ourplugin/featured-professor"==e.name)).map((e=>e.attributes.profId)).filter(((e,t,r)=>r.indexOf(e)==t));console.log(e),wp.data.dispatch("core/editor").editPost({meta:{featuredProfessor:e}})}(0,r.useEffect)((()=>{if(e.attributes.profId){async function t(){const t=await s()({path:`/featuredProfessor/v1/getHTML?profId=${e.attributes.profId}`,method:"GET"});n(t)}i(),t()}}),[e.attributes.profId]),(0,r.useEffect)((()=>()=>{i()}),[]);const d=(0,t.useSelect)((e=>e("core").getEntityRecords("postType","professor",{per_page:-1})));return null==d?(0,a.jsx)("p",{children:__("Loading...","featured-professor")}):(0,a.jsxs)("div",{className:"featured-professor-wrapper",children:[(0,a.jsx)("div",{className:"professor-select-container",children:(0,a.jsxs)("select",{onChange:t=>{e.setAttributes({profId:t.target.value})},children:[(0,a.jsx)("option",{value:"",children:__("Select a professor","featured-professor")}),d.map((t=>(0,a.jsx)("option",{value:t.id,selected:e.attributes.profId==t.id,children:t.title.rendered})))]})}),(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:o}})]})},save:function(){return null}})})();